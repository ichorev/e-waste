<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Waste surevy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: #f0f2f5;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        h1, h2 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        h2 {
            padding: 15px;
            background-color: #34495e;
            color: white;
            border-radius: 8px;
            margin-top: 40px;
            font-size: 1.2em;
        }

        .form-group {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: #f8f9fa;
        }

        .question {
            font-weight: 500;
            color: #34495e;
            margin-bottom: 12px;
        }

        .options {
            margin-left: 20px;
        }

        .radio-option, .checkbox-option {
            margin: 10px 0;
        }

        label {
            display: inline-block;
            margin-left: 8px;
            color: #2c3e50;
        }

        input[type="text"], input[type="number"], textarea, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        button {
            background-color: #2ecc71;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: background-color 0.3s;
            margin-top: 20px;
        }

        button:hover {
            background-color: #27ae60;
        }

        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            display: none;
        }

        .error-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            display: none;
        }

        .nav-buttons {
            margin-bottom: 20px;
            text-align: center;
        }

        .nav-buttons a {
            display: inline-block;
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin: 0 10px;
        }

        .nav-buttons a:hover {
            background-color: #2980b9;
        }

        .checkbox-group {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-buttons">
            <a href="/results.html">View Results</a>
        </div>

        <h1>E-Waste and Environmental Behavior Survey</h1>
        <div id="successMessage" class="success-message">Survey submitted successfully!</div>
        <div id="errorMessage" class="error-message">Error submitting survey. Please try again.</div>
        
        <form id="surveyForm">
            <div class="form-group">
                <label for="name">Your Name:</label>
                <input type="text" id="name" required>
            </div>

            <h2>Device Usage and Disposal</h2>
            
            <div class="form-group">
                <div class="question">How many electronic devices do you currently own?</div>
                <input type="number" id="deviceCount" required min="0">
            </div>

            <div class="form-group">
                <div class="question">What do you typically do with your old electronic devices? (Select all that apply)</div>
                <div class="checkbox-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="disposal1" name="disposalMethod" value="store">
                        <label for="disposal1">Store them at home</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="disposal2" name="disposalMethod" value="trash">
                        <label for="disposal2">Throw in regular trash</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="disposal3" name="disposalMethod" value="sell">
                        <label for="disposal3">Sell them</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="disposal4" name="disposalMethod" value="give">
                        <label for="disposal4">Give to family/friends</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="disposal5" name="disposalMethod" value="recycle">
                        <label for="disposal5">Take to recycling center</label>
                    </div>
                </div>
            </div>

            <h2>Environmental Habits</h2>

            <div class="form-group">
                <div class="question">How often do you refuse unnecessary items and single-use plastics per week?</div>
                <div class="options">
                    <div class="radio-option">
                        <input type="radio" id="refuse1" name="refuseFrequency" value="0-5" required>
                        <label for="refuse1">0-5 times</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="refuse2" name="refuseFrequency" value="6-10">
                        <label for="refuse2">6-10 times</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="refuse3" name="refuseFrequency" value="11-15">
                        <label for="refuse3">11-15 times</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="refuse4" name="refuseFrequency" value="15+">
                        <label for="refuse4">More than 15 times</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">How many items do you give a second life through repair, repurposing, or donating per year?</div>
                <div class="options">
                    <div class="radio-option">
                        <input type="radio" id="repair1" name="repairFrequency" value="1-5" required>
                        <label for="repair1">1-5 items</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="repair2" name="repairFrequency" value="6-10">
                        <label for="repair2">6-10 items</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="repair3" name="repairFrequency" value="11-15">
                        <label for="repair3">11-15 items</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="repair4" name="repairFrequency" value="15+">
                        <label for="repair4">More than 15 items</label>
                    </div>
                </div>
            </div>

            <h2>E-Waste Awareness</h2>

            <div class="form-group">
                <div class="question">Are you familiar with what constitutes e-waste?</div>
                <div class="options">
                    <div class="radio-option">
                        <input type="radio" id="awareness1" name="ewasteAwareness" value="very" required>
                        <label for="awareness1">Very familiar</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="awareness2" name="ewasteAwareness" value="somewhat">
                        <label for="awareness2">Somewhat familiar</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="awareness3" name="ewasteAwareness" value="little">
                        <label for="awareness3">Little knowledge</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="awareness4" name="ewasteAwareness" value="not">
                        <label for="awareness4">Not familiar at all</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">Do you know where the nearest e-waste collection point is located?</div>
                <div class="options">
                    <div class="radio-option">
                        <input type="radio" id="location1" name="collectionPoint" value="yes" required>
                        <label for="location1">Yes</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="location2" name="collectionPoint" value="no">
                        <label for="location2">No</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">Are you aware of the environmental impacts of improper e-waste disposal?</div>
                <div class="options">
                    <div class="radio-option">
                        <input type="radio" id="impact1" name="environmentalImpact" value="very" required>
                        <label for="impact1">Very aware</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="impact2" name="environmentalImpact" value="somewhat">
                        <label for="impact2">Somewhat aware</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="impact3" name="environmentalImpact" value="little">
                        <label for="impact3">Little awareness</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="impact4" name="environmentalImpact" value="not">
                        <label for="impact4">Not aware at all</label>
                    </div>
                </div>
            </div>

            <h2>Device Usage Habits</h2>

            <div class="form-group">
                <div class="question">How long do you usually keep your electronic devices before replacing them?</div>
                <div class="options">
                    <div class="radio-option">
                        <input type="radio" id="keep1" name="deviceKeepDuration" value="1" required>
                        <label for="keep1">Less than 1 year</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="keep2" name="deviceKeepDuration" value="1-2">
                        <label for="keep2">1-2 years</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="keep3" name="deviceKeepDuration" value="3-4">
                        <label for="keep3">3-4 years</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="keep4" name="deviceKeepDuration" value="5+">
                        <label for="keep4">5+ years</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">What factors influence your decision to replace electronic devices? (Select all that apply)</div>
                <div class="checkbox-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="factor1" name="replacementFactors" value="broken">
                        <label for="factor1">Broken/damaged</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="factor2" name="replacementFactors" value="outdated">
                        <label for="factor2">Outdated features</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="factor3" name="replacementFactors" value="new">
                        <label for="factor3">New model release</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="factor4" name="replacementFactors" value="battery">
                        <label for="factor4">Battery issues</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="factor5" name="replacementFactors" value="other">
                        <label for="factor5">Other</label>
                    </div>
                </div>
            </div>

            <h2>Storage Behavior</h2>

            <div class="form-group">
                <div class="question">How many unused electronic devices do you currently have stored at home?</div>
                <input type="number" id="storedDevices" required min="0">
            </div>

            <div class="form-group">
                <div class="question">Why do you keep old electronic devices? (Select all that apply)</div>
                <div class="checkbox-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="keep_reason1" name="storageReasons" value="backup">
                        <label for="keep_reason1">Backup purposes</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="keep_reason2" name="storageReasons" value="sentimental">
                        <label for="keep_reason2">Sentimental value</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="keep_reason3" name="storageReasons" value="disposal">
                        <label for="keep_reason3">Don't know how to dispose</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="keep_reason4" name="storageReasons" value="repair">
                        <label for="keep_reason4">Plan to repair</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="keep_reason5" name="storageReasons" value="security">
                        <label for="keep_reason5">Data security concerns</label>
                    </div>
                </div>
            </div>

            <h2>Recycling Barriers</h2>

            <div class="form-group">
                <div class="question">What prevents you from recycling electronic devices? (Select all that apply)</div>
                <div class="checkbox-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="barrier1" name="recyclingBarriers" value="knowledge">
                        <label for="barrier1">Lack of knowledge about recycling locations</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="barrier2" name="recyclingBarriers" value="inconvenient">
                        <label for="barrier2">Inconvenient recycling centers</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="barrier3" name="recyclingBarriers" value="privacy">
                        <label for="barrier3">Data privacy concerns</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="barrier4" name="recyclingBarriers" value="time">
                        <label for="barrier4">Time constraints</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="barrier5" name="recyclingBarriers" value="transport">
                        <label for="barrier5">Transportation issues</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="comments">Additional Comments (Optional):</label>
                <textarea id="comments"></textarea>
            </div>
            
            <button type="submit">Submit Survey</button>
        </form>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-analytics.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyANZGnO1TZvHbDVNtN3IpK3vfDgYcS9k2k",
            authDomain: "school-project-ewaste.firebaseapp.com",
            databaseURL: "https://school-project-ewaste-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "school-project-ewaste",
            storageBucket: "school-project-ewaste.firebasestorage.app",
            messagingSenderId: "57572832036",
            appId: "1:57572832036:web:583e366c40790b335bb9b1",
            measurementId: "G-Q6BCX46YTB"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase(app);

        // Function to get checkbox values
        function getCheckboxValues(name) {
            return Array.from(document.querySelectorAll(`input[name="${name}"]:checked`))
                .map(checkbox => checkbox.value);
        }

        // Form submission handler
        document.getElementById('surveyForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            const formData = {
                name: document.getElementById('name').value,
                deviceCount: document.getElementById('deviceCount').value,
                disposalMethods: getCheckboxValues('disposalMethod'),
                refuseFrequency: document.querySelector('input[name="refuseFrequency"]:checked').value,
                repairFrequency: document.querySelector('input[name="repairFrequency"]:checked').value,
                ewasteAwareness: document.querySelector('input[name="ewasteAwareness"]:checked').value,
                collectionPoint: document.querySelector('input[name="collectionPoint"]:checked').value,
                environmentalImpact: document.querySelector('input[name="environmentalImpact"]:checked').value,
                deviceKeepDuration: document.querySelector('input[name="deviceKeepDuration"]:checked').value,
                replacementFactors: getCheckboxValues('replacementFactors'),
                storedDevices: document.getElementById('storedDevices').value,
                storageReasons: getCheckboxValues('storageReasons'),
                recyclingBarriers: getCheckboxValues('recyclingBarriers'),
                comments: document.getElementById('comments').value,
                timestamp: new Date().toISOString()
            };
            
            try {
                // Push data to Firebase
                const surveysRef = ref(database, 'surveys');
                await push(surveysRef, formData);
                
                successMessage.style.display = 'block';
                errorMessage.style.display = 'none';
                document.getElementById('surveyForm').reset();
                
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 3000);
            } catch (error) {
                errorMessage.style.display = 'block';
                successMessage.style.display = 'none';
                console.error('Error:', error);
                
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 3000);
            }
        });
    </script>
</body>
</html>
